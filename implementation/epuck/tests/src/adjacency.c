#include <assert.h>
#include <stdio.h>

#include "mock.h"
#include "path-finder.h"

static FieldType accu[] = {
 /* 0        3           7          11          15          19 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /*  0 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /*  3 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, /*  7 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /* 11 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /* 15 */
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /* 19 */
 /* 0        3           7          11          15          19 */
};
typedef char check_size[((sizeof(accu) / sizeof(accu[0])) == MAP_MAX_WIDTH * MAP_MAX_HEIGHT) ? 1 : -1];

int main() {
    MapContainer mc;
    ExactPosition u, v;

    map_heap_container = &mc;
    mc.prox = NULL;
    mc.accu = tests_load(accu, MAP_MAX_WIDTH, MAP_MAX_HEIGHT);

    u.x = 4; u.y = 4;
    v.x = 8; v.y = 4;
    assert(1 == bf_adjacent_p(u, v));

    u.x =  7; u.y = 16;
    v.x = 15; v.y = 16;
    assert(1 == bf_adjacent_p(u, v));

    u.x =  7; u.y = 13;
    v.x = 15; v.y = 13;
    assert(1 == bf_adjacent_p(u, v));

    u.x =  7; u.y =  7;
    v.x = 15; v.y =  7;
    assert(0 == bf_adjacent_p(u, v));

    u.x =  7; u.y = 10;
    v.x = 15; v.y = 10;
    assert(0 == bf_adjacent_p(u, v));

    u.x =  7; u.y = 12;
    v.x = 15; v.y = 12;
    assert(0 == bf_adjacent_p(u, v));

    u.x =  7; u.y =  2;
    v.x = 15; v.y =  2;
    assert(1 == bf_adjacent_p(u, v));

    u.x =  7; u.y =  3;
    v.x = 15; v.y =  3;
    assert(0 == bf_adjacent_p(u, v));

    map_heap_free(mc.accu);
    map_heap_container = NULL;

    return 0;
}
