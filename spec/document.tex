\documentclass[a4paper,parskip,headheight=38pt]{scrartcl} % article or scrartcl
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage[%
  automark,
  headsepline                %% Separation line below the header
]{scrlayer-scrpage}
\usepackage[english]{babel}
\usepackage{hyphenat}
\usepackage[hidelinks]{hyperref}
\usepackage[top=1.4in, bottom=1.5in, left=1in, right=1in]{geometry}
\usepackage{lastpage}
\usepackage{csquotes}
\usepackage{microtype}
\usepackage{datetime}

\usepackage[normalem]{ulem}
\usepackage{enumerate}
\usepackage{hyperref}

% \usepackage{multicol}
\usepackage{graphicx}
\usepackage{graphics}
% \usepackage{float}
% \usepackage{caption}

\setkomafont{pagehead}{\normalfont\sffamily\footnotesize}
\addtolength{\headheight}{+6pt}
\lohead{Marlene Böhmer, s9meboeh@stud\ldots, 2547718 \\
	Maximilian Köhl, mail@koehlma.de, 2553525 \\
	Maximilian Schwenger, schwenger@stud\ldots, 2542438\\
	Ben Wiederhake, s9bewied@stud\ldots, 2541266}
\rohead{\newline \newline \newline ES16, Set 2, Page {\thepage}/{\pageref*{LastPage}}}

\newtimeformat{mytime}{\twodigit{\THEHOUR}\twodigit{\THEMINUTE}\twodigit{\THESECOND}}
\settimeformat{mytime}
\newdateformat{mydate}{\twodigit{\THEYEAR}\twodigit{\THEMONTH}\twodigit{\THEDAY}}
\cfoot{\tiny\texttt{ID \mydate\today\currenttime}}
\chead{} % Needed because now the \subsections get displayed
\pagestyle{scrheadings}

% \renewcommand{\headrulewidth}{0pt}
% \addtolength{\textheight}{+30mm}
% \addtolength{\textwidth}{+50mm}
% \addtolength{\hoffset}{-7mm}

% \newcommand{\Omicron}{\ensuremath{\mathcal{O}}}
% \newcommand{\omicron}{\ensuremath{o}}
% \newcommand{\set}[1]{\{#1\}}
% \newcommand{\abs}[1]{\lvert #1 \rvert}

\DeclareMathOperator{\sinc}{sinc}

\begin{document}

\section{Overview}
A set of robots that survey a simulated collapsed building (maze), try to find a victim (teddy), and rescue it.

\section{Functional Requirements}
\subsection*{A: Must-Have}
\begin{description}
\item[A1] while the Tin Bot is operational a green LED shall be on
\item[A2] the \enquote{LPS} (local positioning system) needs to supply the E-Pucks with location and orientation data
\item[A3] the E-Pucks must share information about the victim
\item[A4] chart the inspected environment using the given LPS signal
\item[A5] find the victim by…
\item[A6.1] … exhaustive search, if nothing about the victim is known
\item[A6.2] … attempted shortest path, if the location of the victim is known
\item[A7] grab the victim using magnets
\item[A8] use proximity sensors / IR receivers to detect whether victim is correctly grabbed
\item[A9] bring the victim out
\item[A10] while the Tin Bot is escorting the victim, at least the front red LED shall be flashing
\item[A11] use the IR-sensors to pick up signals from the victim
\item[A12] detect and stay within the borders of the table
\item[A13] the surrounding 8 red LEDs shall represent which/whether the IR sensors receive something
\end{description}

\subsection*{B: Nice-to-Have}
\begin{description}
\item[B1] be able to behave reasonably if the LPS is missing
\item[B2] export the map
\item[B3] be able to behave reasonably if some of the E-Pucks go defunct
\item[B4] be able to behave reasonably if the map changes
\item[B5] detect if there is no victim
\end{description}

\subsection*{C: Must-not-Have}
\begin{description}
\item[C1] use actual GPS
\item[C2] use actual gyroscope
\item[C3] do not use camera to identify the victim
\item[C4] unsolvable mazes
\item[C5] deal with more than one victim
\item[C6] do not try to remove obstacles
\item[C7] do not try to do detect / react to a malfunctioning / byzantine LPS (although a certain tolerance must be respected of course)
\item[C8] detect/react if the victim is lost
\item[C9] secure against any kind of attack (physical or non physical)
\end{description}

\section{Non-Functional Requirements}
\subsection*{A: Must-Have}
\begin{description}
% FIXME numbering
\item[A14] must not be slower than worst-case brute force
\item[A15] if there is information do not just run to the position where the information was gathered but instead try to actually localize and find the victim
\item[A16] avoid any collisions except with the victim
\item[A17] do not make any assumptions about the maze except being solvable
\item[A18] the exists of the building are the set of the starting positions of the E-Pucks
\item[A19] E-Pucks are equipped with a visual marker on top
\end{description}

\subsection*{B: Nice-to-Have}
\begin{description}
% FIXME numbering
\item[B6] be gentle
\item[B7] use the shortest known path out of the building (see starting positions)
\end{description}

\subsection*{C: Must-not-Have}
\begin{description}
% FIXME numbering
\item[C9] deal with uneven floors or multiple floor buildings
\item[C10] use actually collapsed buildings or victims
\end{description}


\section{Use-Cases}
\subsection{System Startup}
primary actor: user \\
goal in context: activate the E-Puck(s) \\
precondition: LPS is up and running, E-Puck-batteries are connected and loaded up, E-Puck power switches are in the off position. \\
trigger: power switch of 1 or more E-Pucks is switched on \\
scenario: 
\begin{enumerate}[1.]
	\item user places E-Pucks on surface 
	\item user switches on the LPS and waits a second 
	\item user switches on the E-Pucks 
\end{enumerate}
exceptions: E-Pucks are too far away; LPS is too far away; E-Pucks cannot properly move on it's own (e.g. placed upside-down) \\

\subsection{System Shutdown}
primary actor: user \\
goal in context: deactivate the simulation / system \\
precondition: At least on E-Puck's power switch is in the on position \\
trigger: power switch of the currently-switched-on E-Pucks are switched off \\
scenario: 
\begin{enumerate}[1.]
	\item user switches off some of the running E-Pucks 
	\item user switches off the LPS 
	\item user switches off the remaining E-Pucks 
\end{enumerate}

\subsection{Removing an E-Puck}
primary actor: user \\
goal in context: simulate hardware fault in one of the E-Pucks \\
precondition: at least two E-Pucks one the table are switched on and running \\
trigger: power switch of one\footnote{technically: at most all except one} of the switched-on E-Pucks is switched off \\
scenario: 
\begin{enumerate}[1.]
	\item user selects some E-Pucks to be deactivated (at most all except one) 
	\item user switches off these E-Pucks 
	\item user removes none, some, or all of these E-Pucks (the other switched-off E-Pucks shall be considered \enquote{obstacles}) 
\end{enumerate}
exceptions: only one switched-on E-Puck remains; no E-Pucks are running; switching off and not removing any of the selected E-Pucks would render the maze unsolvable \\

\subsection{Adding/Removing Walls}
primary actor: user \\
goal in context: simulate walls that collapse or break away \\
precondition: N<FIXME> is implemented; E-Pucks are running; if removing a wall, at least one "wall" on the table acting as a wall \\
trigger: user manually removes or adds one or more of the wall elements \\
scenario: 
\begin{enumerate}[1.]
	\item user removes some wall segment 
	\item user places the removed wall segment somewhere else 
\end{enumerate}
exceptions: adding a wall must not render the maze unsolvable \\

\subsection{Disabling LPS}
primary actor: user \\
goal in context: simulate connectivity problems between LPS and E-Pucks \\
precondition: LPS is up and running \\
trigger: user switches off the LPS (either by software, by obstructing the view of the camera, or by switching off the Raspberry Pi) \\
scenario: 
\begin{enumerate}[1.]
	\item user literally switches off the Raspberry Pi 
\end{enumerate}

\subsection{Re-enabling LPS}
primary actor: user \\
goal in context: simulate LPS coming back up again (see previous use case) \\
precondition: LPS is not running \\
trigger: user undos the action from the disabling step \\
scenario: 
\begin{enumerate}[1.]
	\item user switches the Raspberry Pi back on 
\end{enumerate}


\section{Environment properties}

\subsection*{A. Plant}
\begin{description}
\item[X1] victim placed in maze
\item[X2] victim sending signals (using IR emitters)
\item[X3] victim wears unstylish magnetic belt
\item[X4] solvable maze (including table and walls)
\item[X5] flat surface
\item[X6] initially unblocked view of the camera
\end{description}

\subsection*{B. Sensors}
\begin{description}
\item[X7] power switches
\item[X8] IR receivers
\item[X9] proximity sensors
\item[X10] Bluetooth receiver
\item[X11] camera (LPS)s
\item[X12] ground sensors
\end{description}

\subsection*{C. Actuator}
\begin{description}
\item[X13] blutooth emitter
\item[X14] motors (two per E-Puck)
\item[X15] IR emitter (victim)
\item[X16] LEDs (on LPS and E-Pucks)
\end{description}


\section{Platform}

\subsection*{A. Hardware}
\begin{description}
\item[X17] $\ge 2$ E-Pucks
\item[X18] ATmega (to connect IR sensor with E-Pucks)
\item[X19] IR sensors (for E-Pucks)
\item[X20] Magnets (for E-Pucks)
\item[X21] Raspberry Pi (for LPS)
\item[X22] Camera (for LPS)
\item[X23] Teddy (a.k.a. victim)
\item[X24] Magnet belt (for Teddy)
\item[X25] IR emitter (for Teddy)
\item[X26] ATtiny (to put unique signal on IR emitter)
\end{description}

\subsection*{B. Libraries}
\begin{description}
\item[X27] E-Puck base libraries
\item[X28] Raspberry Pi base system (Linux, \ldots)
\item[X29] Raspberry Pi Camera module
\item[X30] OpenCV or similar (for image analysis)
\item[X31] base libraries for ATmega and ATtiny
\end{description}

\end{document}
